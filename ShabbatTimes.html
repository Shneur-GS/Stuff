<div id="navBar">
   <svg xmlns="http://www.w3.org/2000/svg" height="48" class="menu-icon" width="48">
      <path d="M5.5 36.8v-3.95h37v3.95Zm0-10.8v-4h37v4Zm0-10.85V11.2h37v3.95Z"/>
   </svg>
   <div id="navTitle">Shabbat Times</div>
   <svg xmlns="http://www.w3.org/2000/svg" height="48" width="48" class="menu-icon">
      <path d="M22.35 34.3h3.6V22h-3.6ZM24 18.7q.9 0 1.475-.575.575-.575.575-1.425 0-.95-.575-1.525T24 14.6q-.9 0-1.475.575-.575.575-.575 1.525 0 .85.575 1.425.575.575 1.475.575Zm0 26q-4.3 0-8.05-1.625-3.75-1.625-6.575-4.45t-4.45-6.575Q3.3 28.3 3.3 24q0-4.35 1.625-8.1T9.35 9.35q2.8-2.8 6.575-4.45Q19.7 3.25 24 3.25q4.35 0 8.125 1.65 3.775 1.65 6.55 4.425t4.425 6.55Q44.75 19.65 44.75 24q0 4.3-1.65 8.075-1.65 3.775-4.45 6.575-2.8 2.8-6.55 4.425T24 44.7Zm.05-3.95q6.95 0 11.825-4.9 4.875-4.9 4.875-11.9 0-6.95-4.875-11.825Q31 7.25 24 7.25q-6.95 0-11.85 4.875Q7.25 17 7.25 24q0 6.95 4.9 11.85 4.9 4.9 11.9 4.9ZM24 24Z"/>
   </svg>
</div>
<div id="navBarLower">
   <div id="navLocation">
      <svg class="location-icon" xmlns="http://www.w3.org/2000/svg" height="40px" width="40px">
         <path id="location-iconInner" d="M22.2 46.6v-3.75q-6.9-.75-11.625-5.45T5.15 25.8H1.4v-3.6h3.75q.75-6.9 5.45-11.625T22.2 5.15V1.4h3.6v3.75q6.9.7 11.6 5.425Q42.1 15.3 42.85 22.2h3.75v3.6h-3.75q-.7 6.9-5.425 11.6Q32.7 42.1 25.8 42.85v3.75Zm1.8-7.65q6.15 0 10.55-4.4T38.95 24q0-6.15-4.4-10.55T24 9.05q-6.15 0-10.55 4.4T9.05 24q0 6.15 4.4 10.55T24 38.95Zm0-7.45q-3.15 0-5.325-2.175Q16.5 27.15 16.5 24q0-3.15 2.175-5.325Q20.85 16.5 24 16.5q3.15 0 5.325 2.175Q31.5 20.85 31.5 24q0 3.15-2.175 5.325Q27.15 31.5 24 31.5Z"/>
      </svg>
      <div id="setLocation">Hebrew Dates</div>
   </div>
   <div id="navLocation">
      <svg class="location-icon" xmlns="http://www.w3.org/2000/svg" height="40px" width="40px">
         <path id="location-iconInner" d="m31.05 33.75 2.7-2.65-7.8-7.9v-9.75h-3.6V24.7ZM24 44.7q-4.25 0-8.025-1.625-3.775-1.625-6.6-4.45Q6.55 35.8 4.925 32.05T3.3 24q0-4.25 1.625-8.025 1.625-3.775 4.45-6.6Q12.2 6.55 15.975 4.9 19.75 3.25 24 3.25t8.025 1.65q3.775 1.65 6.6 4.475 2.825 2.825 4.475 6.6Q44.75 19.75 44.75 24t-1.65 8.025q-1.65 3.775-4.475 6.6-2.825 2.825-6.575 4.45T24 44.7ZM24 24Zm0 16.75q6.9 0 11.825-4.9Q40.75 30.95 40.75 24q0-6.9-4.925-11.825Q30.9 7.25 24 7.25q-6.9 0-11.825 4.925Q7.25 17.1 7.25 24q0 6.95 4.925 11.85Q17.1 40.75 24 40.75Z"/>
      </svg>
      <div id="cDate">Current Date:</div>
   </div>
</div>
<div id="parsha" class="datePre">Parshat Korach</div>
<div id="dateBox">
   <div class="dates">
      <div id="startDateEng" class="shabbatDate">Day, Month dd, yyyy</div>
   </div>
   <div class="times">
      <div class="shabbatTimePre">Light Candles at</div>
      <div id="startTime" class="shabbatTime">8:13 PM</div>
   </div>
</div>
<div class="shabbatEnd" id="dateBox">
   <div class="dates">
      <div id="endDateEng" class="shabbatDate" id="title">Friday, July 1, 2022</div>
      <div id="endDateHeb"class="shabbatDate">Friday, July 1, 2022</div>
   </div>
   <div class="times">
      <div class="shabbatTimePre">Make Havdalah at</div>
      <div id="endTime" class="shabbatTime">8:13 PM</div>
   </div>
</div>

<script>
  //convert dates from 'mm-dd-yyyy' to 'weekday, month day'
function convertDate(dateString) {

    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

    var date = new Date(dateString);

    return days[date.getDay()] + ", " + months[date.getMonth()] + " " + date.getDate() + ", " + date.getFullYear()
}

//call api
var request = new XMLHttpRequest();
var url = "https://www.hebcal.com/shabbat?cfg=json&geo=zip&zip=32246=on"
var today = new Date();
var date = (today.getMonth() + 1) + "/" + (today.getDay() + 1) + "/" + today.getFullYear();
request.open('GET', url);

// parse data
request.onload = function() {
    var data = JSON.parse(this.response);
    var location = data.location.title;
    var parsha = data.items[1].title;
    var rawStartDateEng = data.range.start;
    var rawEndDateEng = data.range.end;
    var timeStartRaw = data.items[0].title;
    var timeEndtRaw = data.items[2].title;
    var endDateHeb = data.items[1].hdate;


    // format time
    var timeStart = timeStartRaw.replace("Candle lighting: ", "");
    timeStart = timeStart.replace("pm", " PM");

    // format time
    var timeEnd = timeEndtRaw.replace("Havdalah: ", "");
    timeEnd = timeEnd.replace("pm", " PM");

    //convert start date to mm-dd-yyyy
    var dateStr = rawStartDateEng;
    var d = new Date(dateStr);
    var dd = d.getDate() + 1;
    var mm = d.getMonth() + 1;
    var yyyy = d.getFullYear();
    if (dd < 10) {
        dd = '0' + dd
    }
    if (mm < 10) {
        mm = '0' + mm
    }

    var newDateStr = mm + '-' + dd + '-' + yyyy;

    //convert end date to mm-dd-yyyy
    var dateEnd = rawEndDateEng;
    var d2 = new Date(dateEnd);
    var dd2 = d2.getDate() + 1;
    var mm2 = d2.getMonth() + 1;
    var yyyy2 = d2.getFullYear();
    if (dd2 < 10) {
        dd2 = '0' + dd2
    }
    if (mm2 < 10) {
        mm2 = '0' + mm2
    }

    var newDateEnd = mm2 + '-' + dd2 + '-' + yyyy2;

    // insert data
    document.getElementById('setLocation').innerHTML = location;
    document.getElementById('parsha').innerHTML = parsha;
    document.getElementById("startDateEng").innerHTML = convertDate(newDateStr);
    document.getElementById("endDateEng").innerHTML = convertDate(newDateEnd);
    document.getElementById('startTime').innerHTML = timeStart;
    document.getElementById('endTime').innerHTML = timeEnd;
    document.getElementById('endDateHeb').innerHTML = endDateHeb;
    document.getElementById('cDate').innerHTML = "Current Date: " + date;

}
request.send();
</script>
